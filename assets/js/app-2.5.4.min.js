window.onload=function(){var e=document.getElementById("OpenSpeedTest-UI");e.parentNode.replaceChild(e.contentDocument.documentElement,e),ostOnload(),OpenSpeedTest.Start()},function(e){var t,o,s=function(e){e&&"function"==typeof e&&e()};function n(e){if(!(this instanceof n))return new n(e);this.el=document.getElementById(e)}n.prototype.fade=function e(t,o,n){var i="in"===t,r=i?0:1,l=14/o,a=this;i&&(a.el.style.display="block",a.el.style.opacity=r);var $=window.setInterval(function e(){r=i?r+l:r-l,a.el.style.opacity=r,r<=0&&(a.el.style.display="none"),(r<=0||r>=1)&&window.clearInterval($,s(n))},14)};var i=function(e,t,o,s){return e/=s,o*(--e*e*e+1)+t},r=function(){this.YourIP=n("YourIP"),this.ipDesk=n("ipDesk"),this.ipMob=n("ipMob"),this.downSymbolDesk=n("downSymbolDesk"),this.upSymbolDesk=n("upSymbolDesk"),this.upSymbolMob=n("upSymbolMob"),this.downSymbolMob=n("downSymbolMob"),this.logoSymbolMob=n("logoSymbolMob"),this.logoSymbolDesk=n("logoSymbolDesk"),this.settingsMob=n("settingsMob"),this.settingsDesk=n("settingsDesk"),this.oDoLiveStatus=n("oDoLiveStatus"),this.ConnectErrorMob=n("ConnectErrorMob"),this.ConnectErrorDesk=n("ConnectErrorDesk"),this.downResult=n("downResult"),this.upRestxt=n("upRestxt"),this.pingResult=n("pingResult"),this.jitterDesk=n("jitterDesk"),this.pingMobres=n("pingMobres"),this.JitterResultMon=n("JitterResultMon"),this.JitterResultms=n("JitterResultms"),this.UI_Desk=n("UI-Desk"),this.UI_Mob=n("UI-Mob"),this.oDoTopSpeed=n("oDoTopSpeed"),this.startButtonMob=n("startButtonMob"),this.restartButtonMob=n("restartButtonMob"),this.startButtonDesk=n("startButtonDesk"),this.restartButtonDesk=n("restartButtonDesk"),this.intro_Desk=n("intro-Desk"),this.intro_Mob=n("intro-Mob"),this.loader=n("loading_app"),this.OpenSpeedtest=n("OpenSpeedtest"),this.mainGaugebg_Desk=n("mainGaugebg-Desk"),this.mainGaugeBlue_Desk=n("mainGaugeBlue-Desk"),this.mainGaugeWhite_Desk=n("mainGaugeWhite-Desk"),this.mainGaugebg_Mob=n("mainGaugebg-Mob"),this.mainGaugeBlue_Mob=n("mainGaugeBlue-Mob"),this.mainGaugeWhite_Mob=n("mainGaugeWhite-Mob"),this.oDoLiveSpeed=n("oDoLiveSpeed"),this.progressStatus_Mob=n("progressStatus-Mob"),this.progressStatus_Desk=n("progressStatus-Desk"),this.graphc1=n("graphc1"),this.graphc2=n("graphc2"),this.graphMob2=n("graphMob2"),this.graphMob1=n("graphMob1"),this.text=n("text"),this.scale=[{degree:680,value:0},{degree:570,value:.5},{degree:460,value:1},{degree:337,value:10},{degree:220,value:100},{degree:115,value:500},{degree:0,value:1e3},],this.element="",this.chart="",this.polygon="",this.width=200,this.height=50,this.maxValue=0,this.values=[],this.points=[],this.vSteps=5,this.measurements=[],this.points=[]};r.prototype.reset=function(){this.element="",this.chart="",this.polygon="",this.width=200,this.height=50,this.maxValue=0,this.values=[],this.points=[],this.vSteps=5,this.measurements=[],this.points=[]},r.prototype.ip=function(){var e=this;"block"===e.ipDesk.el.style.display?(e.ipDesk.el.style.display="none",e.ipMob.el.style.display="none"):(e.ipDesk.el.style.display="block",e.ipMob.el.style.display="block")},r.prototype.prePing=function(){this.loader.fade("out",500),this.OpenSpeedtest.fade("in",1e3)},r.prototype.app=function(){this.loader.fade("out",500,this.ShowAppIntro())},r.prototype.ShowAppIntro=function(){this.OpenSpeedtest.fade("in",1e3)},r.prototype.userInterface=function(){this.intro_Desk.fade("out",1e3),this.intro_Mob.fade("out",1e3,this.ShowUI())},r.prototype.ShowUI=function(){this.UI_Desk.fade("in",1e3),this.UI_Mob.fade("in",1e3,function e(o){var s,i,r,l,a;s=n("downResult"),i=n("upRestxt"),r=n("pingResult"),l=n("jitterDesk"),a=n("pingMobres"),s.el.textContent="---",i.el.textContent="---",r.el.textContent="---",l.el.textContent="---",a.el.textContent="---",t="Loaded",console.log("Developed by Vishnu. Email --> me@vishnu.pro")})},r.prototype.Symbol=function(e){0==e&&(this.downSymbolMob.el.style.display="block",this.downSymbolDesk.el.style.display="block",this.upSymbolMob.el.style.display="none",this.upSymbolDesk.el.style.display="none",this.logoSymbolDesk.el.style.display="none",this.logoSymbolMob.el.style.display="none",this.restartButtonDesk.el.style.display="none",this.restartButtonMob.el.style.display="none"),1==e&&(this.downSymbolMob.el.style.display="none",this.downSymbolDesk.el.style.display="none",this.upSymbolMob.el.style.display="block",this.upSymbolDesk.el.style.display="block",this.logoSymbolDesk.el.style.display="none",this.logoSymbolMob.el.style.display="none",this.restartButtonDesk.el.style.display="none",this.restartButtonMob.el.style.display="none"),2==e&&(this.downSymbolMob.el.style.display="none",this.downSymbolDesk.el.style.display="none",this.upSymbolMob.el.style.display="none",this.upSymbolDesk.el.style.display="none",this.logoSymbolDesk.el.style.display="block",this.logoSymbolMob.el.style.display="block",this.restartButtonDesk.el.style.display="block",this.restartButtonMob.el.style.display="block")},r.prototype.Graph=function(e,t){"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var o,s,n=this;if(0===t){var i=this.graphc1.el;o="line",this.graphMob2.el.style.display="none",this.graphMob1.el.style.display="block"}else i=this.graphc2.el,o="line2",this.graphMob1.el.style.display="none",this.graphMob2.el.style.display="block";isNaN(e)?this.values.push(""):this.values.push(e),e>0&&function e(t,r){(function e(){for(s=0,n.maxValue=0;s<n.values.length;s++)n.values[s]>n.maxValue&&(n.maxValue=n.values[s]);n.maxValue=Math.ceil(n.maxValue)})(),function e(){if(n.values.length>1){var t="0,"+n.height+" ";for(s=0;s<n.values.length;s++){var o=n.values[s]/n.maxValue;t+=(130/(n.values.length-1)*s).toFixed(2)+","+(n.height-n.height*o).toFixed(2)+" "}t+="130,"+n.height,n.points=t}}(),function e(){for(s=0;s<n.vSteps;s++){var t=Math.ceil(n.maxValue/n.vSteps*(s+1));n.measurements.push(t)}n.measurements.reverse()}();for(var l=document.getElementsByClassName(o);l.length>0;)l[0].remove();n.polygon=document.createElementNS("http://www.w3.org/2000/svg","polygon"),n.polygon.setAttribute("points",n.points),n.polygon.setAttribute("class",o),n.values.length>1&&i.appendChild(n.polygon)}(i,e)},r.prototype.progress=function(e,t){var s=this,n=t,r=e,l=Date.now(),a=setInterval(function(){var e=(Date.now()-l)/1e3,t=i(e,400,400,n),$=i(e,400,-400,n);r?(s.progressStatus_Desk.el.style.strokeDashoffset=t,s.progressStatus_Mob.el.style.strokeDashoffset=t):(s.progressStatus_Desk.el.style.strokeDashoffset=$,s.progressStatus_Mob.el.style.strokeDashoffset=$),e>=n&&(clearInterval(a),o="done",s.progressStatus_Desk.el.style.strokeDashoffset=800,s.progressStatus_Mob.el.style.strokeDashoffset=800)},14)},r.prototype.mainGaugeProgress=function(e){var t=e;t<0&&(t=0);var o=this.getNonlinearDegree(t);e>0&&(this.mainGaugeBlue_Desk.el.style.strokeOpacity=1,this.mainGaugeWhite_Desk.el.style.strokeOpacity=1,this.mainGaugeBlue_Mob.el.style.strokeOpacity=1,this.mainGaugeWhite_Mob.el.style.strokeOpacity=1,this.mainGaugeBlue_Desk.el.style.strokeDashoffset=o,this.mainGaugeWhite_Desk.el.style.strokeDashoffset=0==o?1:o+1,this.mainGaugeBlue_Mob.el.style.strokeDashoffset=o,this.mainGaugeWhite_Mob.el.style.strokeDashoffset=0==o?1:o+1),0==o&&t>1e3?(this.mainGaugeBlue_Mob.el.style.strokeDashoffset=o>=681?681:o,this.mainGaugeWhite_Mob.el.style.strokeDashoffset=0==o?1:o+1,this.mainGaugeWhite_Desk.el.style.strokeDashoffset=0==o?1:o+1,this.mainGaugeBlue_Desk.el.style.strokeDashoffset=o>=681?681:o):0==o&&t<=0&&(this.mainGaugeBlue_Mob.el.style.strokeDashoffset=681.1,this.mainGaugeWhite_Mob.el.style.strokeDashoffset=.1,this.mainGaugeWhite_Desk.el.style.strokeDashoffset=.1,this.mainGaugeBlue_Desk.el.style.strokeDashoffset=681.1)},r.prototype.showStatus=function(e){this.oDoLiveStatus.el.textContent=e},r.prototype.ConnectionError=function(){this.ConnectErrorMob.el.style.display="block",this.ConnectErrorDesk.el.style.display="block"},r.prototype.uploadResult=function(e){e<1&&(this.upRestxt.el.textContent=e.toFixed(3)),e>=1&&e<9999&&(this.upRestxt.el.textContent=e.toFixed(1)),e>=1e4&&e<99999&&(this.upRestxt.el.textContent=e.toFixed(1),this.upRestxt.el.style.fontSize="20px"),e>=1e5&&(this.upRestxt.el.textContent=e.toFixed(1),this.upRestxt.el.style.fontSize="18px")},r.prototype.pingResults=function(e,t){var o=e;"Ping"===t&&(o>=1&&o<1e4?(this.pingResult.el.textContent=Math.floor(o),this.pingMobres.el.textContent=Math.floor(o)):o>=0&&o<1&&(0==o&&(o=0),this.pingResult.el.textContent=o,this.pingMobres.el.textContent=o)),"Error"===t&&(this.oDoLiveSpeed.el.textContent=o)},r.prototype.downloadResult=function(e){e<1&&(this.downResult.el.textContent=e.toFixed(3)),e>=1&&e<9999&&(this.downResult.el.textContent=e.toFixed(1)),e>=1e4&&e<99999&&(this.downResult.el.textContent=e.toFixed(1),this.downResult.el.style.fontSize="20px"),e>=1e5&&(this.downResult.el.textContent=e.toFixed(1),this.downResult.el.style.fontSize="18px")},r.prototype.jitterResult=function(e,t){var o=e;if("Jitter"===t){if(o>=1&&o<1e4){if(this.jitterDesk.el.textContent=Math.floor(o),o>=1&&o<100&&(this.JitterResultMon.el.textContent=Math.floor(o)),o>=100){var s=(o/1e3).toFixed(1);this.JitterResultMon.el.textContent=s+"k"}}else o>=0&&o<1&&(0==o&&(o=0),this.jitterDesk.el.textContent=o,this.JitterResultMon.el.textContent=o)}},r.prototype.LiveSpeed=function(e,t){var o=e;if("countDown"===t){var s=o.toFixed(0);this.oDoLiveSpeed.el.textContent=s;return}if("speedToZero"===t){"number"==typeof o&&(o=o.toFixed(1)),o<=0&&(o=0),this.oDoLiveSpeed.el.textContent=o,this.oDoTopSpeed.el.textContent="1000+",this.oDoTopSpeed.el.style.fontSize="16.9px",this.oDoTopSpeed.el.style.fill="gray";return}if("Ping"===t)o>=1&&o<1e4?this.oDoLiveSpeed.el.textContent=Math.floor(o):o>=0&&o<1&&(0==o&&(o=0),this.oDoLiveSpeed.el.textContent=o);else{if(0==o){var s=o.toFixed(0);this.oDoLiveSpeed.el.textContent=s}if(o<=1&&o>0){var s=o.toFixed(3);this.oDoLiveSpeed.el.textContent=s}if(o>1){var s=o.toFixed(1);this.oDoLiveSpeed.el.textContent=s}o<=1e3&&(this.oDoTopSpeed.el.textContent="1000+",this.oDoTopSpeed.el.style.fontSize="16.9px",this.oDoTopSpeed.el.style.fill="gray"),o>=1010&&(this.oDoTopSpeed.el.textContent=1e3*Math.floor(o/1010)+"+",this.oDoTopSpeed.el.style.fill="gray",this.oDoTopSpeed.el.style.fontSize="17.2px")}},r.prototype.GaugeProgresstoZero=function(e,o){var s=e,n=this;if(s>=0)var i=Date.now(),r=0-s,l=setInterval(function(){var e,a,$,p=(Date.now()-i)/1e3,u=(e=p,a=s,$=r,e/=3,$*(--e*e*e*e*e+1)+a);n.LiveSpeed(u,"speedToZero"),n.mainGaugeProgress(u),(p>=3||u<=0)&&(clearInterval(l),n.LiveSpeed(0,"speedToZero"),n.mainGaugeProgress(0),t=o)},16)},r.prototype.getNonlinearDegree=function(e){var t=0;if(0==e||e<=0||isNaN(e))return 0;for(;t<this.scale.length;){if(!(e>this.scale[t].value))return this.scale[t-1].degree+(e-this.scale[t-1].value)*(this.scale[t].degree-this.scale[t-1].degree)/(this.scale[t].value-this.scale[t-1].value);t++}return this.scale[this.scale.length-1].degree};var l=function(){this.OverAllTimeAvg=window.performance.now(),this.SpeedSamples=[],this.FinalSpeed};l.prototype.reset=function(){this.OverAllTimeAvg=window.performance.now(),this.SpeedSamples=[],this.FinalSpeed=0},l.prototype.ArraySum=function(e){var t=e;return t?t.reduce(function(e,t){if("number"==typeof e&&"number"==typeof t)return e+t},0):0},l.prototype.AvgSpeed=function(e,t,o){var s=this;this.timeNow=(window.performance.now()-this.OverAllTimeAvg)/1e3,this.FinalSpeed;var n=t;return n=o-n,this.timeNow>=n&&(e>0&&this.SpeedSamples.push(e),s.FinalSpeed=s.ArraySum(s.SpeedSamples)/s.SpeedSamples.length),s.FinalSpeed},l.prototype.uRandom=function(e,t){var e=e,o=new Uint32Array(262144);function n(){for(var e=o.length,t=0;t<e;t++)o[t]=4294967296*Math.random();return o}var i=[];return new Blob(function(e){for(var e=e,t=0;t<e;t++)i[t]=n();return i}(e),{type:"application/octet-stream"},s(t))},l.prototype.addEvt=function(e,t,o){e.addEventListener(t,o)},l.prototype.remEvt=function(e,t,o){e.removeEventListener(t,o)};var a=function(){var s,n,i,a,$,p,u,h,d,y,f,g,c,_,v,m,S,b,D,k,w,x,M,C,R,E,G,L,B,T,I,F,P,O,A,U,N,W=new l,j=new r;j.app();var J=location.hostname,V=[],z=[],H=[],Z=0,q=0,Y=0,X=0;function K(){z=0,H=0,c=0,Y=0}D=window.navigator.userAgent?window.navigator.userAgent:"Not Found";var Q=.6*ulDuration,ee=.6*dlDuration;.6*ulDuration>=7&&(Q=7),.6*dlDuration>=7&&(ee=7);var et=!0,eo=!0;W.addEvt(j.settingsMob.el,"click",ec),W.addEvt(j.settingsDesk.el,"click",ec),W.addEvt(j.startButtonDesk.el,"click",e_),W.addEvt(j.restartButtonDesk.el,"click",e_),W.addEvt(j.startButtonMob.el,"click",e_),W.addEvt(j.restartButtonMob.el,"click",e_),W.addEvt(document,"keypress",eb);var es=!0,en=function(e){var t={},o=document.createElement("a");o.href=e;for(var s=o.search.substring(1).split("&"),n=0;n<s.length;n++){var i=s[n].split("=");t[i[0]]=decodeURIComponent(i[1])}return t}(window.location.href.toLowerCase());setPingSamples&&("string"==typeof en.ping||"string"==typeof en.p)&&(void 0!==en.ping?k=en.ping:void 0!==en.p&&(k=en.p),k>0&&(pingSamples=k,pingSamples=k)),setPingTimeout&&("string"==typeof en.out||"string"==typeof en.o)&&(void 0!==en.out?w=en.out:void 0!==en.o&&(w=en.o),w>1&&(pingTimeOut=w,pingTimeOut=w)),setHTTPReq&&("string"==typeof en.xhr||"string"==typeof en.x)&&(void 0!==en.xhr?x=en.xhr:void 0!==en.x&&(x=en.x),x>0&&x<=32&&(dlThreads=x,ulThreads=x)),selectServer&&("string"==typeof en.host||"string"==typeof en.h)&&(void 0!==en.host?M=en.host:void 0!==en.h&&(M=en.h),s=M,/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(s)&&(openSpeedTestServerList=[{ServerName:"Home",Download:M+"/downloading",Upload:M+"/upload",ServerIcon:"DefaultIcon"},]));var ei=parseInt(en.stress),er=parseInt(en.s);"string"==typeof en.stress?(C=en.stress,R=ei):"string"==typeof en.s&&(C=en.s,R=er),C&&stressTest&&(("low"===C||"l"===C)&&(dlDuration=300,ulDuration=300),("medium"===C||"m"===C)&&(dlDuration=600,ulDuration=600),("high"===C||"h"===C)&&(dlDuration=900,ulDuration=900),("veryhigh"===C||"v"===C)&&(dlDuration=1800,ulDuration=1800),("extreme"===C||"e"===C)&&(dlDuration=3600,ulDuration=3600),("day"===C||"d"===C)&&(dlDuration=86400,ulDuration=86400),("year"===C||"y"===C)&&(dlDuration=31557600,ulDuration=31557600),(ei>12||er>12)&&(dlDuration=R,ulDuration=R));var el=parseInt(en.clean),ea=parseInt(en.c),e$=1;el?e$=el:ea&&(e$=ea),enableClean&&("string"==typeof en.clean||"string"==typeof en.c)&&(el>=1||ea>=1?(el<5||ea<5)&&(upAdjust=1+e$/100,dlAdjust=1+e$/100):(upAdjust=1,dlAdjust=1));var ep=parseInt(en.run),eu=parseInt(en.r);enableRun&&("string"==typeof en.run||"string"==typeof en.r)&&(E=ep>0?ep:eu>0?eu:0),E>=0&&et&&e_();var eh=en.test,ed=en.t,ey=!1;selectTest&&("string"==typeof eh||"string"==typeof ed)&&(eh?(G=eh,ey=eh):ed&&(G=ed,ey=ed),"download"===G||"d"===G?(p=0,h=0,ey="Download",et&&e_()):"upload"===G||"u"===G?($=0,u=0,ey="Upload",X=1,et&&e_()):"ping"===G||"p"===G?(p=0,h=0,$=0,u=0,ey="Ping",et&&e_()):ey=!1);var ef=0,eg=!1;function ec(){eg&&(j.YourIP.el.textContent="Please wait..",eN(7),eg=!1),j.ip()}function e_(){if(es&&(W.remEvt(j.settingsMob.el,"click",ec),W.remEvt(j.settingsDesk.el,"click",ec),W.remEvt(j.startButtonDesk.el,"click",e_),W.remEvt(j.restartButtonDesk.el,"click",e_),W.remEvt(j.startButtonMob.el,"click",e_),W.remEvt(j.restartButtonMob.el,"click",e_),W.remEvt(document,"keypress",eb),es=!1),E>=0){et=!1,j.userInterface(),eo=!1;var e=Math.ceil(Math.abs(E));j.showStatus("Automatic Test Starts in ...");var t=setInterval(function o(){e>=1?(e-=1,j.LiveSpeed(e,"countDown")):e<=0&&(clearInterval(t),et=!0,E=void 0,e_())},1e3)}"fetch"===openSpeedTestServerList&&!0===et&&(et=!1,j.showStatus("Fetching Server Info.."),eN(6)),!0===et&&("Ping"===ey?ek():"Download"===ey?ek():"Upload"===ey?ek():!1===ey&&ek())}var ev="DRIXAN",em=".com",eS=ev;function eb(e){"Enter"===e.key&&e_()}var eD=0;function ek(){eo&&(j.userInterface(),eo=!1),function s(){function i(){S=window.performance.now(),function e(){for(var t=0;t<ulThreads;t++)setTimeout(function(e){e2(e)},ulDelay*t,t)}()}("widget"===openChannel||"web"===openChannel)&&eN(1);var r=setInterval(function(){if("Loaded"===t&&(t="busy",function e(){if(e5=openSpeedTestServerList.length,t="Ping",performance.clearResourceTimings(),eO<e5-1)eO++,"Stop"!=N&&function e(t,o){var s=0,n=[],i=[];function r(){if(s<pingSamples)s++,"Stop"!=N&&l();else if(n.length>1){i.sort(function(e,t){return e-t});var e=(i=(i=i.slice(0,i.length*jitterFinalSample)).reduce(function(e,t){return e+t},0)/i.length).toFixed(1),r=Math.min.apply(Math,n);eA.push(r),eU.push(t),e6.push(e),"function"==typeof o&&o()}else"function"==typeof o&&o()}function l(){var e=new XMLHttpRequest;"Stop"!=N&&e.abort(),e.open(pingMethod,t[pingFile]+"?n="+Math.random(),!0),e.timeout=pingTimeOut;var o=window.performance.now();e.send(),e.onload=function(){if(200===this.status&&4===this.readyState){var e,t=Math.floor(window.performance.now()-o),l=performance.getEntries();if(e="xmlhttprequest"===(l=l[l.length-1]).initiatorType?parseFloat(l.duration.toFixed(1)):t,s>250&&(e=t),e<=0?(P=.1,n.push(.1)):(P=e,n.push(e)),n.length>1){var a=Math.abs(n[n.length-1]-n[n.length-2]).toFixed(1);i.push(parseFloat(a)),A=a,j.LiveSpeed(e,"Ping"),j.pingResults(e,"Ping"),j.jitterResult(a,"Jitter")}r()}404===this.status&&4===this.readyState&&(s++,r())},e.onerror=function(e){s++,r()},e.ontimeout=function(e){s++,r()}}l()}(openSpeedTestServerList[eO],e);else if(eU.length>=1){var o=Math.min.apply(Math,eA),s=eA.indexOf(o);F=eU[s],O=o,U=e6[s],N="Busy",j.LiveSpeed(O,"Ping"),j.pingResults(O,"Ping"),j.jitterResult(U,"Jitter"),d=O,y=U,t=ey?"Ping"==ey?"SendR":ey:"Download"}else eU.Download||(t="Error")}()),"Ping"===t&&(t="busy",j.showStatus("Milliseconds")),"Download"===t&&(j.showStatus("Initializing.."),W.reset(),K(),j.reset(),m=window.performance.now(),function e(){for(var t=0;t<dlThreads;t++)setTimeout(function(e){e7(e)},dlDelay*t,t)}(),t="initDown"),"Downloading"===t){if(j.Symbol(0),0==ef){ef=1,j.showStatus("Testing download speed..");var s=(window.performance.now()-m)/1e3;L=s,j.progress(1,dlDuration+2.5),dlDuration+=s}v=(window.performance.now()-m)/1e3,eP("dl"),j.showStatus("Mbps download"),j.mainGaugeProgress(Y),j.LiveSpeed(Y),j.Graph(Y,0),$=W.AvgSpeed(Y,ee,dlDuration),v>=dlDuration&&"done"==o&&(ey?(j.GaugeProgresstoZero(Y,"SendR"),j.showStatus("CONCLU\xcdDO"),j.Symbol(2)):j.GaugeProgresstoZero(Y,"Upload"),j.downloadResult($),u=Z,X=1,t="busy",K(),W.reset())}if("Upload"==t&&1===X&&(j.Symbol(1),t="initup",j.showStatus("Initializing.."),j.LiveSpeed("...","speedToZero"),n=W.uRandom(ulDataSize,i),ey&&(ef=1)),"Uploading"===t){if(1==ef){ef=2,j.showStatus("Testing upload speed.."),Y=0,W.reset(),j.reset();var l=(window.performance.now()-S)/1e3;B=l,j.progress(!1,ulDuration+2.5),ulDuration+=l}j.showStatus("Mbps upload"),_=(window.performance.now()-S)/1e3,eP("up"),j.mainGaugeProgress(Y),j.LiveSpeed(Y),j.Graph(Y,1),p=W.AvgSpeed(Y,Q,ulDuration),_>=ulDuration&&1==X&&(h=q,j.uploadResult(p),j.GaugeProgresstoZero(Y,"SendR"),n=void 0,j.showStatus("CONCLU\xcdDO"),j.Symbol(2),t="busy",X=0)}if("Error"===t){j.showStatus("Check your network connection status."),j.ConnectionError(),t="busy",clearInterval(r);var a=document.createElement("div");a.innerHTML="<g></g>";var f=a.querySelector("a");j.oDoLiveSpeed.el.textContent="Network Error";var g=document.getElementById("oDoLiveSpeed");f.innerHTML=g.innerHTML,g.innerHTML=a.innerHTML}if("SendR"===t){j.showStatus("CONCLU\xcdDO");var a=document.createElement("div");a.innerHTML="<g></g>";var f=a.querySelector("a");if(j.oDoLiveSpeed.el.textContent=eS,location.hostname!=ev.toLowerCase()+em){b=encodeURI(b="https://"+ev.toLowerCase()+em+"/results/show.php?&d="+$.toFixed(3)+"&u="+p.toFixed(3)+"&p="+d+"&j="+y+"&dd="+(u/1048576).toFixed(3)+"&ud="+(h/1048576).toFixed(3)+"&ua="+D);var c=document.getElementById("resultsData");c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b),c.setAttribute("target","_blank"),saveData&&eN(5)}else eN(3);t="busy",clearInterval(r),$=0,p=0,u=0,h=0,X=0,t="Idle",console.log("Restarting parameters..."),e.Start()}},100)}()}"web"===openChannel&&(eD=webRe,eg=!0),"widget"===openChannel&&(eD=widgetRe,eg=!0),"selfwidget"===openChannel&&(eD=widgetRe,J=a=domainx),openChannel;var ew=0,ex=0,eM=0,eC=0,eR=0,eE=0,eG=0,eL=0,e0=0,eB=0,e8=0,eT=0,e4=0,eI=0,eF=1e3*dlDuration-6e3,e3=1e3*ulDuration-6e3;function eP(e){if("dl"===e){var t=1e3*v;t>1e3*L+ee/2*1e3&&0===eG&&(eG=1,eE*=.01,eM*=.01,T=t+1e4),t>=T&&T<eF&&(T+=1e4,eE*=.01,eM*=.01),ew=Z<=0?0:Z-ex,ex=Z,eM+=ew,eC=eR=t-eR,eR=t,eE+=eC,eM>0&&(Y=c=eM/eE/125*upAdjust)}if("up"===e){var o=1e3*_;o>1e3*B+Q/2*1e3&&0===eI&&(eI=1,e4*=.1,eB*=.1,I=o+1e4),o>=I&&I<e3&&(I+=1e4,e4*=.1,eB*=.1),eL=q<=0?0:q-e0,e0=q,eB+=eL,e8=eT=o-eT,eT=o,e4+=e8,eB>0&&(Y=c=eB/e4/125*upAdjust)}}function e7(e){var o=0,s=new XMLHttpRequest;V[e]=s,V[e].open("GET",F.Download+"?n="+Math.random(),!0),V[e].onprogress=function(s){if(1===X)return V[e].abort(),V[e]=null,V[e]=void 0,delete V[e],!1;"initDown"==t&&(t="Downloading");var n=s.loaded<=0?0:s.loaded-o;if(isNaN(n)||!isFinite(n)||n<0)return!1;Z+=n,o=s.loaded},V[e].onload=function(s){0===o&&(Z+=s.total),"initDown"==t&&(t="Downloading"),V[e]&&(V[e].abort(),V[e]=null,V[e]=void 0,delete V[e]),0===X&&e7(e)},V[e].onerror=function(t){0===X&&e7(e)},V[e].responseType="arraybuffer",V[e].send()}var e1=[];function e2(e){var o=0,s=new XMLHttpRequest;e1[e]=s,e1[e].open("POST",F.Upload+"?n="+Math.random(),!0),e1[e].upload.onprogress=function(s){if("initup"==t&&void 0===n){var n;t="Uploading"}if(_>=ulDuration)return e1[e].abort(),e1[e]=null,e1[e]=void 0,delete e1[e],!1;var i=s.loaded<=0?0:s.loaded-o;if(isNaN(i)||!isFinite(i)||i<0)return!1;q+=i,o=s.loaded},e1[e].onload=function(){if(0===o&&(q+=1048576*ulDataSize,_>=ulDuration))return e1[e].abort(),e1[e]=null,e1[e]=void 0,delete e1[e],!1;if("initup"==t&&void 0===s){var s;t="Uploading"}e1[e]&&(e1[e].abort(),e1[e]=null,e1[e]=void 0,delete e1[e]),1===X&&e2(e)},e1[e].onerror=function(t){_<=ulDuration&&e2(e)},e1[e].setRequestHeader("Content-Type","application/octet-stream"),e>0&&q<=17e3||e1[e].send(n)}var eO=-1,eA=[],eU=[],e6=[],e5=openSpeedTestServerList.length,eN=function(e){var t=new XMLHttpRequest,o=OpenSpeedTestdb;1==e&&(o=webIP),5==e&&(o=saveDataURL),7==e&&(o=get_IP),t.open("POST",o,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(g=t.responseText.trim(),2==e&&(i=g),1==e&&(a=g),3==e&&setTimeout(function(){location.href=eD+g},1500),6==e&&(openSpeedTestServerList=JSON.parse(g),et=!0,e_()),7==e&&(j.YourIP.el.textContent=g))},2==e&&(f="r=n"),3==e&&(f="r=l&d="+$+"&u="+p+"&dd="+u/1048576+"&ud="+h/1048576+"&p="+d+"&do="+J+"&S="+i+"&sip="+a+"&jit="+y+"&ua="+D),5==e&&(f=b),6==e&&(f="r=s"),t.send(f)}};e.Start=function(){new a}}(window.OpenSpeedTest=window.OpenSpeedTest||{});